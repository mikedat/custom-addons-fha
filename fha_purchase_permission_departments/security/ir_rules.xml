<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Inicio grupo para los jefes de departamento -->
        <record id="purchase_head_department" model="res.groups">
            <field name="name">Jefe de departamento</field>
            <field name="comment">Grupo para jefes de departamento</field>
            <field name="category_id" ref="base.module_category_inventory_purchase"/>
            <field name="implied_ids" eval="[(4, ref('purchase.group_purchase_user'))]"/>
        </record>
        <!-- Final grupo para los jefes de departamento -->

        <!-- Inicio grupo para los jefes de area -->
        <record id="purchase_head_area" model="res.groups">
            <field name="name">Jefe de Area</field>
            <field name="comment"> Grupo para jefes de area </field>
            <field name="category_id" ref="base.module_category_inventory_purchase"/>
            <field name="implied_ids" eval="[(4, ref('purchase_head_department'))]"/>
        </record>
        <!-- Final grupo para los jefes de area -->

        <!-- Inicio de la regla para los jefes de departamento -->
        <record id="purchase_head_department_order" model="ir.rule">
            <field name="name">Regla para jefes departamentales</field>
            <field name="model_id" ref="purchase.model_purchase_order"/>
            <field name="domain_force">
            [('user_id.department_id.id', '=', user.department_id.id)]
            </field>
            <field name="groups" eval="[(4, ref('purchase_head_department'))]"/>
        </record>
        <!-- Fin de la regla para los jefes de departamento -->

        <!-- Inicio de la regla para los jefes de area -->
        <record id="purchase_head_area_order" model="ir.rule">
            <field name="name">Regla para jefes de Area</field>
            <field name="model_id" ref="purchase.model_purchase_order"/>
            <field name="domain_force"> 
              ['|', '|',
            ('user_id', '=', user.id),
            ('user_id.employee_id.parent_id.user_id', '=', user.id),
            ('user_id.employee_id.parent_id.parent_id.user_id', '=', user.id)
            ]
            </field>
            <field name="groups" eval="[(4, ref('purchase_head_area'))]"/>
        </record>
        <!-- Final de la regla para los jefes de area -->
    </data>
</odoo>
